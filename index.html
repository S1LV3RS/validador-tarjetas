<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Validador Web</title>

  <!-- Fonts (estilo “silver edition”) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=JetBrains+Mono:wght@400;700&family=Playfair+Display:wght@600;700&family=Great+Vibes&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#050507;
      --panel:#0b0b0f;
      --line:rgba(255,255,255,.12);
      --line2:rgba(255,255,255,.08);
      --txt:#f4f4f6;
      --muted:rgba(255,255,255,.55);
      --muted2:rgba(255,255,255,.35);
      --silver1:#f2f2f2;
      --silver2:#bdbdbd;
      --silver3:#6f6f6f;
      --btn:#e7e7e7;
      --btnTxt:#0a0a0a;
    }

    *{margin:0;padding:0;box-sizing:border-box;}
    html,body{height:100%;}
    body{
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--txt);
      background:
        radial-gradient(900px 520px at 50% -120px, rgba(255,255,255,.10), transparent 55%),
        radial-gradient(700px 420px at 50% 35%, rgba(255,255,255,.06), transparent 60%),
        radial-gradient(1100px 720px at 50% 115%, rgba(0,0,0,.65), transparent 55%),
        linear-gradient(180deg, #07070a 0%, #040406 45%, #040406 100%);
      display:flex;
      justify-content:center;
      align-items:center;
      padding:26px 18px;
    }

    /* contenedor general (como app mobile centrada) */
    .container{
      width:100%;
      max-width:430px;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:18px;
    }

    /* Header tipo “VALIDATOR PRO / SILVER EDITION” */
    .header{
      width:100%;
      text-align:center;
      padding:12px 6px 8px;
    }
    .brand{
      font-family:"Playfair Display", serif;
      font-weight:700;
      font-size:42px;
      letter-spacing:.06em;
      line-height:1;
      background: linear-gradient(180deg, var(--silver1) 0%, var(--silver2) 52%, var(--silver3) 110%);
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
      text-transform:uppercase;
      position:relative;
      display:inline-block;
      text-shadow: 0 12px 30px rgba(0,0,0,.55);
    }
    .brand::before,
    .brand::after{
      content:"";
      display:inline-block;
      width:34px;
      height:1px;
      background:rgba(255,255,255,.25);
      vertical-align:middle;
      margin:0 12px 10px;
      filter:blur(.15px);
    }
    .edition{
      margin-top:10px;
      font-size:12px;
      letter-spacing:.48em;
      text-transform:uppercase;
      color:rgba(255,255,255,.35);
    }

    /* Card “preview” */
    .virtual-card{
      width:100%;
      aspect-ratio: 1.62/1; /* similar a la imagen */
      border-radius:26px;
      background:
        radial-gradient(600px 220px at 20% 15%, rgba(255,255,255,.07), transparent 60%),
        radial-gradient(520px 260px at 80% 85%, rgba(255,255,255,.05), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.04) 0%, rgba(255,255,255,.02) 55%, rgba(0,0,0,.10) 100%);
      border:1px solid rgba(255,255,255,.10);
      box-shadow:
        0 28px 70px rgba(0,0,0,.65),
        inset 0 1px 0 rgba(255,255,255,.07),
        inset 0 -20px 60px rgba(0,0,0,.55);
      position:relative;
      overflow:hidden;
      padding:22px 22px 18px;
    }
    .virtual-card::after{
      content:"";
      position:absolute;
      inset:0;
      border-radius:26px;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
      pointer-events:none;
    }

    /* banda superior “silenciosa” */
    .card-top{
      display:flex;
      justify-content:flex-end;
      align-items:flex-start;
      min-height:18px;
      opacity:.0; /* oculto, para mantener tu JS sin romper nada */
      pointer-events:none;
    }
    .chip{display:none;}
    .card-brand-logo{display:none !important;}
    #cardBrandText{display:none !important;}

    .card-number-display{
      margin-top:12px;
      text-align:center;
      font-family:"JetBrains Mono", monospace;
      font-size: clamp(18px, 4.6vw, 22px);
      letter-spacing:.24em;
      color:rgba(255,255,255,.12); /* en la imagen el número no resalta */
      user-select:none;
    }

    .card-details{
      position:absolute;
      left:22px;
      right:22px;
      bottom:18px;
      display:flex;
      justify-content:space-between;
      align-items:flex-end;
      gap:14px;
    }

    .detail-group label{
      display:block;
      font-size:12px;
      letter-spacing:.22em;
      text-transform:uppercase;
      color:rgba(255,255,255,.55);
      margin-bottom:6px;
    }

    /* TITULAR “Usuario” tipo firma */
    #displayName{
      font-family:"Great Vibes", cursive;
      font-size:34px;
      line-height:1;
      color:rgba(255,255,255,.92);
      text-shadow: 0 10px 22px rgba(0,0,0,.55);
      transform: translateY(2px);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width: 240px;
    }

    /* VENCE “MM/AA” monoespaciado marcado */
    #displayExpiry{
      font-family:"JetBrains Mono", monospace;
      font-weight:800;
      font-size:22px;
      letter-spacing:.12em;
      color:rgba(255,255,255,.92);
      text-shadow: 0 10px 22px rgba(0,0,0,.55);
      white-space:nowrap;
    }

    /* Form panel */
    .input-terminal{
      width:100%;
      background:
        radial-gradient(520px 260px at 20% 0%, rgba(255,255,255,.06), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.03) 0%, rgba(0,0,0,.18) 100%);
      border:1px solid rgba(255,255,255,.10);
      border-radius:28px;
      padding:28px 22px 22px;
      box-shadow:
        0 28px 70px rgba(0,0,0,.65),
        inset 0 1px 0 rgba(255,255,255,.06);
    }

    /* ocultamos la barra “terminal” (puntos) para parecerse a la imagen */
    .terminal-header{display:none;}

    .input-group{margin-bottom:18px;}

    .input-label{
      display:block;
      color:rgba(255,255,255,.85);
      font-weight:800;
      letter-spacing:.22em;
      text-transform:uppercase;
      font-size:14px;
      margin-bottom:14px;
    }

    /* Inputs con línea (estética de la imagen) */
    .input-field{
      width:100%;
      background:transparent;
      border:none;
      border-bottom:2px solid rgba(255,255,255,.18);
      padding:12px 2px 12px;
      font-size:28px;
      color:rgba(255,255,255,.25);
      outline:none;
      letter-spacing:.08em;
      font-family:"JetBrains Mono", monospace;
      transition:.25s ease;
    }
    .input-field::placeholder{
      color:rgba(255,255,255,.18);
    }
    .input-field:focus{
      color:rgba(255,255,255,.85);
      border-bottom-color: rgba(255,255,255,.35);
    }

    /* Botón grande claro */
    .btn-validate{
      width:100%;
      margin-top:6px;
      padding:18px 16px;
      border-radius:18px;
      border:2px solid rgba(0,0,0,.12);
      background:linear-gradient(180deg, #f0f0f0 0%, #dcdcdc 100%);
      color:var(--btnTxt);
      font-weight:900;
      letter-spacing:.20em;
      text-transform:uppercase;
      font-size:16px;
      cursor:pointer;
      box-shadow:
        0 18px 40px rgba(0,0,0,.55),
        inset 0 1px 0 rgba(255,255,255,.65);
      transition: transform .08s ease, filter .2s ease;
    }
    .btn-validate:active{transform:scale(.985);}
    .btn-validate:hover{filter:brightness(1.03);}

    /* Modal (lo dejamos, solo “más silver”) */
    .modal-overlay{
      position:fixed; inset:0;
      background: rgba(0,0,0,.80);
      backdrop-filter: blur(10px);
      display:flex; justify-content:center; align-items:center;
      opacity:0; pointer-events:none;
      transition:.25s ease;
      z-index:999;
      padding:20px;
    }
    .modal-overlay.active{opacity:1; pointer-events:auto;}
    .modal-content{
      width:100%;
      max-width:360px;
      border-radius:26px;
      background:
        radial-gradient(520px 260px at 30% 0%, rgba(255,255,255,.08), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.05) 0%, rgba(0,0,0,.25) 100%);
      border:1px solid rgba(255,255,255,.12);
      box-shadow: 0 35px 90px rgba(0,0,0,.75), inset 0 1px 0 rgba(255,255,255,.06);
      padding:28px 22px 22px;
      text-align:center;
      transform:scale(.92);
      transition:.25s ease;
    }
    .modal-overlay.active .modal-content{transform:scale(1);}

    .status-icon{font-size:52px;margin-bottom:10px;display:block;}
    .btn-close{
      width:100%;
      margin-top:16px;
      padding:14px 14px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.08);
      color: rgba(255,255,255,.9);
      font-weight:700;
      letter-spacing:.08em;
      cursor:pointer;
    }

    .hidden{display:none;}
  </style>
</head>

<body>
  <div class="container">

    <div class="header">
      <div class="brand">VALIDATOR PRO</div>
      <div class="edition">SILVER EDITION</div>
    </div>

    <div class="virtual-card">
      <div class="card-top">
        <div class="chip"></div>
        <img src="" class="card-brand-logo hidden" id="cardBrandLogo">
        <span id="cardBrandText" style="font-weight: 600; font-size: 1.2rem;"></span>
      </div>

      <div class="card-number-display" id="displayNumber">#### #### #### ####</div>

      <div class="card-details">
        <div class="detail-group">
          <label>TITULAR</label>
          <div id="displayName">Usuario</div>
        </div>
        <div class="detail-group" style="text-align:right;">
          <label>VENCE</label>
          <div id="displayExpiry">MM/AA</div>
        </div>
      </div>
    </div>

    <div class="input-terminal">
      <div class="terminal-header">
        <div class="terminal-dots">
          <span class="dot red"></span><span class="dot yellow"></span><span class="dot green"></span>
        </div>
      </div>

      <form id="paymentForm" autocomplete="on" onsubmit="return false;">
        <div class="input-group">
          <label class="input-label">NÚMERO DE TARJETA</label>
          <input
            type="text"
            id="inputNumber"
            class="input-field"
            placeholder="0000 0000 0000 0000"
            maxlength="19"
            name="cc-number"
            autocomplete="cc-number"
            inputmode="numeric"
          />
        </div>

        <div class="input-group">
          <label class="input-label">VENCIMIENTO (MM/AA)</label>
          <input
            type="text"
            id="inputExpiry"
            class="input-field"
            placeholder="MM/AA"
            maxlength="5"
            name="cc-exp"
            autocomplete="cc-exp"
            inputmode="numeric"
          />
        </div>

        <button class="btn-validate" id="btnValidate">AGREGAR TARJETA</button>
      </form>
    </div>
  </div>

  <div class="modal-overlay" id="resultModal">
    <div class="modal-content">
      <div class="status-icon" id="modalIcon"></div>
      <h2 style="margin-bottom: 8px;" id="modalTitle"></h2>
      <p style="color: rgba(255,255,255,.65); font-size: 0.95rem;" id="modalMsg"></p>
      <button class="btn-close" id="btnCloseModal">Cerrar</button>
    </div>
  </div>

  <script>
    const randomNames = ["DIEGO SANTOS", "MARIA GARCIA", "JUAN PEREZ", "ANA LOPEZ", "CARLOS RUIZ", "ALEX MORGAN", "DAVID SMITH"];
    const brandLogos = {
      visa: 'https://upload.wikimedia.org/wikipedia/commons/5/5e/Visa_Inc._logo.svg',
      mastercard: 'https://upload.wikimedia.org/wikipedia/commons/2/2a/Mastercard-logo.svg',
      amex: 'https://upload.wikimedia.org/wikipedia/commons/3/30/American_Express_logo.svg',
      discover: 'https://upload.wikimedia.org/wikipedia/commons/5/57/Discover_Card_logo.svg'
    };

    const inputNumber = document.getElementById('inputNumber');
    const inputExpiry = document.getElementById('inputExpiry');
    const resultModal = document.getElementById('resultModal');

    window.onload = () => {
      // En la tarjeta (firma) se ve mejor como “Usuario”, pero respetamos tu random
      document.getElementById('displayName').textContent = "Usuario";
    };

    function updateCardUI(numberRaw) {
      let brand = null;
      if (/^4/.test(numberRaw)) brand = 'visa';
      else if (/^5[1-5]/.test(numberRaw)) brand = 'mastercard';
      else if (/^3[47]/.test(numberRaw)) brand = 'amex';
      else if (/^6(?:011|5)/.test(numberRaw)) brand = 'discover';

      const logo = document.getElementById('cardBrandLogo');
      const text = document.getElementById('cardBrandText');

      // Mantengo tu lógica, pero el rediseño los oculta (display:none).
      if (brand) { logo.src = brandLogos[brand]; logo.classList.remove('hidden'); text.textContent = ''; }
      else { logo.classList.add('hidden'); text.textContent = ''; }

      document.getElementById('displayNumber').textContent = inputNumber.value || '#### #### #### ####';
      document.getElementById('displayExpiry').textContent = inputExpiry.value || 'MM/AA';
    }

    function luhnCheck(val) {
      let sum = 0, shouldDouble = false;
      for (let i = val.length - 1; i >= 0; i--) {
        let digit = parseInt(val.charAt(i));
        if (shouldDouble) { if ((digit *= 2) > 9) digit -= 9; }
        sum += digit; shouldDouble = !shouldDouble;
      }
      return (sum % 10) === 0;
    }

    function validateExpiry(dateString) {
      if (!/^\d{2}\/\d{2}$/.test(dateString)) return false;
      const [month, yearStr] = dateString.split('/').map(Number);
      const year = 2000 + yearStr;
      const now = new Date();
      if (month < 1 || month > 12) return false;
      if (year < now.getFullYear() || (year === now.getFullYear() && month < (now.getMonth() + 1))) return false;
      return true;
    }

    inputNumber.addEventListener('input', (e) => {
      let val = e.target.value.replace(/\D/g, '');
      e.target.value = val.replace(/(\d{4})(?=\d)/g, '$1 ').trim();
      updateCardUI(val);
    });

    inputExpiry.addEventListener('input', (e) => {
      let val = e.target.value.replace(/\D/g, '');
      if (val.length >= 3) e.target.value = val.slice(0, 2) + '/' + val.slice(2, 4);
      else e.target.value = val;
      updateCardUI(inputNumber.value.replace(/\s/g,''));
    });

    document.getElementById('btnValidate').addEventListener('click', () => {
      const numRaw = inputNumber.value.replace(/\s/g, '');
      const expRaw = inputExpiry.value;
      const modalIcon = document.getElementById('modalIcon');
      const modalTitle = document.getElementById('modalTitle');
      const modalMsg = document.getElementById('modalMsg');

      let isValid = true;
      let msg = "Tarjeta verificada correctamente.";

      if (numRaw.length < 13 || !luhnCheck(numRaw)) {
        isValid = false; msg = "El número de tarjeta es incorrecto (Fallo Luhn).";
      } else if (!validateExpiry(expRaw)) {
        isValid = false; msg = "La fecha de vencimiento no es válida.";
      }

      modalIcon.textContent = isValid ? '✅' : '❌';
      modalTitle.textContent = isValid ? 'VÁLIDA' : 'INVÁLIDA';
      modalTitle.style.color = isValid ? '#d8d8d8' : '#ff4a6a';
      modalMsg.textContent = msg;
      resultModal.classList.add('active');
    });

    document.getElementById('btnCloseModal').addEventListener('click', () => resultModal.classList.remove('active'));
    resultModal.addEventListener('click', (e) => { if(e.target === resultModal) resultModal.classList.remove('active'); });
  </script>
</body>
</html>
